<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="description" content="Leaderboard for PersonaGym">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PersonaGym Leaderboard</title>
  <link rel="icon" type="image/x-icon" href="static/images/favicon.ico">
  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro" rel="stylesheet">
  <link rel="stylesheet" href="static/css/bulma.min.css">
  <link rel="stylesheet" href="static/css/bulma-carousel.min.css">
  <link rel="stylesheet" href="static/css/bulma-slider.min.css">
  <link rel="stylesheet" href="static/css/fontawesome.all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="static/css/index.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script defer src="static/js/fontawesome.all.min.js"></script>
  <script src="static/js/bulma-carousel.min.js"></script>
  <script src="static/js/bulma-slider.min.js"></script>
  <script src="static/js/index.js"></script>
  <style>
    .leaderboard-wrapper {
      border: 2px solid black;
      padding: 20px;
      background-color: white;
      border-radius: 10px;
      margin: 0 auto;
      width: 100%;
      max-width: 1200px;
      overflow-x: auto;
    }
    .leaderboard-container {
      display: flex;
      justify-content: center;
      width: 100%;
    }
    .leaderboard-section {
      background-color: #f0f0f0;
      padding: 20px;
      margin-bottom: 20px;
      text-align: left;
    }
    .leaderboard-section h2 {
      font-size: 1.5em;
      text-align: center;
    }
    .leaderboard-section p, .leaderboard-section ul, .leaderboard-section li, .leaderboard-section ol {
      font-size: 0.9em;
      text-align: left;
    }
    .leaderboard-section ol {
      padding-left: 1.5em;
    }
    .home-button {
      margin-bottom: 20px;
      background-color: black;
      color: white;
    }
    .leaderboard-table {
      width: 100%;
      border-collapse: collapse;
      margin: 0 auto;
    }
    .leaderboard-table th, .leaderboard-table td {
      padding: 8px;
    }
    .leaderboard-table th {
      background-color: #f2f2f2;
      text-align: left;
      font-size: 0.9em;
      font-family: 'Times New Roman', Times, serif;
      cursor: pointer;
    }
    .leaderboard-table th:hover {
      background-color: #e0e0e0;
    }
    .leaderboard-table td {
      text-align: center;
      font-size: 0.9em;
    }
    .leaderboard-table tr:nth-child(even) {
      background-color: #f9f9f9;
    }
    .leaderboard-table tr:hover {
      background-color: #ddd;
    }
    .leaderboard-table .icon {
      color: #555;
    }
    .leaderboard-table th:nth-child(2),
    .leaderboard-table td:nth-child(2) {
      width: 120px;
      min-width: 120px;
    }
    .leaderboard-table th:first-child,
    .leaderboard-table td:first-child {
      width: 20%;
    }
    .leaderboard-table th:not(:first-child):not(:nth-child(2)),
    .leaderboard-table td:not(:first-child):not(:nth-child(2)) {
      width: 10%;
    }
    .submission-box {
      border: 1px solid black;
      padding: 10px;
      margin-bottom: 20px;
      background-color: #ffffff;
      font-size: 0.9em;
    }
    .submission-box h3 {
      font-size: 1.2em;
      margin-bottom: 10px;
    }
    .submission-box p {
      margin: 5px 0;
    }
    .label-date {
      font-size: 1em;
      background-color: #333;
      color: white;
      padding: 0.2em 0.5em;
      border-radius: 0.3em;
    }
    .highest-score {
      font-weight: bold;
      color: #007bff;
    }
  </style>
</head>
<body>

<section class="hero">
  <div class="hero-body">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column has-text-centered">
          <a href="index.html" class="button home-button is-rounded">Back to Home</a>
          <h1 class="title is-1 publication-title">PersonaGym Leaderboard</h1>

          <div class="content-wrapper" style="display: flex; justify-content: center; align-items: center;">
            <div style="background-color: black; padding: 1.5em 1em; color: white; border-radius: 1em; text-align: center; width: 100%;">
                All official submissions to the PersonaGym leaderboard are maintained at
                <a href="https://github.com/vsamuel2003/PersonaGym" class="light-blue-link" target="_blank" rel="noopener noreferrer">
                    <i class="fab fa-github"></i> PersonaGym/evaluations
                </a>
            </div>
          </div>
          <br>
          <br>

          <!-- Leaderboard Wrapper -->
          <div class="leaderboard-container">
            <div class="leaderboard-wrapper">
              <!-- Leaderboard Table -->
              <table class="leaderboard-table" id="leaderboardTable">
                <thead>
                  <tr>
                    <th onclick="sortTable(0)">Model</th>
                    <th onclick="sortTable(1)">Date</th>
                    <th onclick="sortTable(2)">Action Justification</th>
                    <th onclick="sortTable(3)">Expected Action</th>
                    <th onclick="sortTable(4)">Linguistic Habits</th>
                    <th onclick="sortTable(5)">Persona Consistency</th>
                    <th onclick="sortTable(6)">Toxicity Control</th>
                    <th onclick="sortTable(7)">PersonaScore</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Claude 3.5 Sonnet ðŸ¥‡</td>
                    <td><span class="label-date">2024-07-10</span></td>
                    <td>4.52</td>
                    <td>4.37</td>
                    <td>3.98</td>
                    <td>4.81</td>
                    <td>4.88</td>
                    <td>4.51</td>
                  </tr>
                  <tr>
                    <td>LLaMA-3 (8b) ðŸ¥ˆ</td>
                    <td><span class="label-date">2024-07-10</span></td>
                    <td>4.55</td>
                    <td>4.43</td>
                    <td>3.97</td>
                    <td>4.77</td>
                    <td>4.74</td>
                    <td>4.49</td>
                  </tr>
                  <tr>
                    <td>LLaMA-2 (70b) ðŸ¥‰</td>
                    <td><span class="label-date">2024-07-10</span></td>
                    <td>4.44</td>
                    <td>4.32</td>
                    <td>3.85</td>
                    <td>4.67</td>
                    <td>4.68</td>
                    <td>4.39</td>
                  </tr>
                  <tr>
                    <td>GPT-3.5</td>
                    <td><span class="label-date">2024-07-10</span></td>
                    <td>4.31</td>
                    <td>4.28</td>
                    <td>3.63</td>
                    <td>4.70</td>
                    <td>4.96</td>
                    <td>4.38</td>
                  </tr>
                  <tr>
                    <td>LLaMA-2 (13b)</td>
                    <td><span class="label-date">2024-07-10</span></td>
                    <td>3.96</td>
                    <td>3.87</td>
                    <td>3.77</td>
                    <td>4.12</td>
                    <td>4.18</td>
                    <td>3.98</td>
                  </tr>
                  <tr>
                    <td>Claude 3 Haiku</td>
                    <td><span class="label-date">2024-07-10</span></td>
                    <td>2.47</td>
                    <td>4.28</td>
                    <td>3.04</td>
                    <td>4.47</td>
                    <td>4.94</td>
                    <td>3.64</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <br>
          <br>

          <div class="leaderboard-section" style="font-size: 18px; line-height: 1.6;">
            <h2 class="subtitle" style="font-size: 24px; line-height: 1.6;"><strong>Submit to PersonaGym Leaderboard</strong></h2>
            <p style="font-size: 18px; line-height: 1.6;">If you are interested in submitting your model to the PersonaGym Leaderboard, please do the following:</p>
            <ol style="font-size: 18px; line-height: 1.6;">
                <li>Fork this repository.</li>
                <li>Under the evaluations directory create a new folder with the submission date and the model name (e.g. 20240415_llama_2_70b).</li>
                <li>Within the folder, please include the following files:
                    <ul style="font-size: 18px; line-height: 1.6;">
                        <li><code>scores.json</code>: The JSON file containing the average score for all tasks in PersonaGym on our benchmark. This file is automatically generated by our code and is saved under scores/{save_name} where save_name is a flag to our run script.</li>
                        <li><code>README.md</code>: (Recommended) Include any information you would like to share about your model in this README.</li>
                    </ul>
                </li>
                <li>Create a pull request to this repository with the new folder.</li>
            </ol>
            <p style="font-size: 18px; line-height: 1.6;">The leaderboard will be updated every Monday.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<footer class="footer">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-8">
        <div class="content">
          <p>
            This page was built using the <a href="https://github.com/eliahuhorwitz/Academic-project-page-template" target="_blank">Academic Project Page Template</a> which was adopted from the <a href="https://nerfies.github.io" target="_blank">Nerfies</a> project page.
            You are free to borrow the design of this website, we just ask that you link back to this page in the footer. <br> This website is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
          </p>
        </div>
      </div>
    </div>
  </div>
</footer>

<script>
  function highlightHighestScores() {
    const table = document.getElementById('leaderboardTable');
    const rows = table.getElementsByTagName('tr');
    const numCols = rows[0].cells.length;

    for (let col = 2; col < numCols; col++) {
      let highestScore = -Infinity;
      let highestScoreElements = [];

      for (let row = 1; row < rows.length; row++) {
        const cell = rows[row].cells[col];
        const score = parseFloat(cell.textContent);
        
        if (score > highestScore) {
          highestScore = score;
          highestScoreElements = [cell];
        } else if (score === highestScore) {
          highestScoreElements.push(cell);
        }
      }

      highestScoreElements.forEach(element => {
        element.classList.add('highest-score');
      });
    }
  }

  function sortTable(column) {
    const table = document.getElementById('leaderboardTable');
    const tbody = table.tBodies[0];
    const rows = Array.from(tbody.rows);

    const sortedRows = rows.sort((a, b) => {
      let aValue = a.cells[column].textContent.trim();
      let bValue = b.cells[column].textContent.trim();

      if (column === 0) {
        // Sort by model name
        return aValue.localeCompare(bValue);
      } else if (column === 1) {
        // Sort by date
        return new Date(aValue) - new Date(bValue);
      } else {
        // Sort by score (numeric)
        return parseFloat(bValue) - parseFloat(aValue);
      }
    });

    sortedRows.forEach(row => tbody.appendChild(row));
  }

  // Call the function to highlight highest scores when the page loads
  window.onload = highlightHighestScores;
</script>

</body>
</html>
